## 架构5要素

[部署 Elastic Stack | 凤凰架构 (icyfenix.cn)](https://icyfenix.cn/appendix/operation-env-setup/elk-setup.html)



[微服务实战（一）：微服务架构的优势与不足 - DockOne.io](http://dockone.io/article/394)







分库分表：





## 微服务实战

- [微服务实战（一）：微服务架构的优势与不足](http://dockone.io/article/394)
- [微服务实战（二）：使用API Gateway](http://dockone.io/article/482)
- [微服务实战（三）：深入微服务架构的进程间通信](http://dockone.io/article/549)
- [微服务实战（四）：服务发现的可行方案以及实践案例](http://dockone.io/article/771)
- [微服务实践（五）：微服务的事件驱动数据管理](http://dockone.io/article/936)
- [微服务实践（六）：选择微服务部署策略](http://dockone.io/article/1066)
- [微服务实践（七）：从单体式架构迁移到微服务架构](http://dockone.io/article/1266)

[为什么要用springcloud? - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/145334649#:~:text=考虑 Spring Cloud 的原因有如下几点： Spring Cloud,来源于 Spring，质量、稳定性、持续性都可以得到保证。 spirng Cloud 天然支持 Spring Boot，更加便于业务落地。)

## 单体架构

**优点**

1. 涉及技术栈少，业务之外的因素考虑较少，开发成本低，测试开发较容易。
2. 易于部署，以Java为例，单体架构打包成一个jar包或war包即可，通过在负载均衡器后端运行多个拷贝就可以轻松实现应用扩展。

**问题**

1. 随着不断的迭代，功能越来越多，代码量也越来越多，项目的整个体量会越来越大。
2. 降低开发速度，应用越大，启动越慢，不利于测试以及上线，严重影响开发进度。对于saas产品，可能每天都会改变，对于单体应用来说，需要不断的测试和部署。
3. 单体应用不可靠，所有功能都是用同一台机器资源，模块中的任意一个bug，都有可能造成内存泄露，搞垮整个进程。需要在硬件上支持。
4. 单体架构使用新的架构或语言很难，如果想切换框架，时间成本和对技术人员要求较高，需要花大量的人力和财力。
5. 总结：
   1. 功能的迭代，项目体积越来越大，不利于维护，测试，开发。
   2. 可靠性较低，无法扩展，敏捷开发和部署无法完成。
   3. 技术更新难，更新成本高

## 微服务架构

**优点**

1. 将巨大的单体应用拆分为多个小型服务，各服务边界清晰，容易开发和维护。
2. 每个服务都可以找单独的团队或人员开发，各服务相对简单，后期迭代或代码重构较单体项目来说更容易。
   1. 每个服务较独立，只要服务提供方和使用方商量好，服务提供方可以自定义技术选择，只要能达到要求即可。
3. 每个模块可以单独部署，不需要协调其他服务部署对本服务的影响，可以加快部署速度。
4. 可以根据各个服务的规模，选择更适合于服务资源需求的硬件。

**不足**

1. 技术复杂性增高，使用RPC或消息队列进行进程间的通信，必须写代码来处理消息传递中速度过慢或者不可用等局部失效问题。
2. 数据库不在同一台服务器上，分布式事务的控制，CAP理论，最终一致性方案的选择都是业务开发中需要考虑的问题。
3. 测试相对单体架构，要相对复杂，因为涉及服务之间的调用等。
4. 需求改变时，如果一个服务的功能改变，需要考虑对其他服务的适配，如A依赖B，B的相关业务发生变化，需要考虑对A的影响，需要部署AB两个或更多的服务来进行测试。
5. 一个微服务应用一般由大批服务构成，服务器的配置、部署、扩展和监控，以及服务发现机制，都是需要考虑的问题。
6. 总结：
   1. 技术复杂度高，需要考虑的问题较多，对人员开发水平要求较高，成本较高。
   2. 一个模块的需求变化，和这个模块有关联的服务，可能都需要进行联调和测试。
   3. 测试，部署等相对单体要复杂。
