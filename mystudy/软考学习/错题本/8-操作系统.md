# 操作系统

# 操作系统定义，分类，及功能

## 基础

1. linux只有一个根目录，用“/”表示。更改一个文件的全线设置可以使用chmod命令。
2. 

## 格式化

![image-20211101145040262](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101145040262.png)

因为Windows XP操作系统支持**FAT、FAT32或NTFS文件系统，**所以利用“磁盘管理”程序可以对磁盘进行初始化、创建卷，并可以选择使用**FAT、FAT32或NTFS文件系统**格式化卷。             

## 操作系统定义

****

操作系统有两个重要作用：

①通过资源管理提高计算机系统的效率，操作系统是计算机系统的资源管理者，它含有对系统软/硬件资源实施管理的一组程序。

②改善人机界面，向用户提供友好的工作环境。             

![image-20211101145332712](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101145332712.png)

财务软件、汽车防盗程序、办公管理软件和气象预报软件都属于应用软件，而选项A、C和D中含有这些软件。

选项B中汇编程序、编译程序和数据库管理系统软件都属于系统软件。

 计算机系统由硬件和软件两部分组成。通常把未配置软件的计算机称为裸机，直接使用裸机不仅不方便，而且将严重降低工作效率和机器的利用率。操作系统（Operating System）的目的是为了填补人与机器之间的鸿沟，即建立用户与计算机之间的接口而为裸机配置的一种系统软件。由图1可以看出，操作系统是裸机上的窠一层软件，是对硬件系统功能的首次扩充。它在计算机系统中占据重要而特殊的地位，所有其他软件，如编辑程序、汇编程序、编译程序和数据库管理系统等系统软件，以及大量的应用软件都是建立在操作系统基础上的，并得到它的支持和取得它的服务。从用户角度看，当计算机配置了操作系统后，用户不再直接使用计算机系统硬件，而是利用操作系统所提供的命令和服务去操纵计算机，操作系统已成为现代计算机系统中必不可少的最重要的系统软件，因此把操作系统看作是用户与计算机之间的接口。因此，操作系统紧贴系统硬件之上，所有其他软件之下（是其他软件的共同环境）。              

## 移动臂

![image-20211101150720691](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101150720691.png)

最短移臂调度算法，**即优先响应距离较近磁道的申请**。1、当前磁头位于15号柱面（柱面号即磁道编号），请求序列分别位于12号柱面（①⑤）、19号柱面（②④）、23号柱面（③）、28号柱面（⑥）；2、距离15号柱面最近的应该是12号柱面（①⑤），优先响应（①⑤），次序不限；3、此时磁头位于12号柱面，距离最近的应该是19号柱面（②④），次序不限；4、此时磁头位于19号柱面，距离最近的应该是23号柱面（③）；5、此时磁头位于23号柱面，距离最近的应该是28号柱面（⑥）。             

离15的距离远近   12   1 9   23   28

![image-20211102105900375](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102105900375.png)

Scan调度算法：柱面号根据 磁头，由小到大递增，没有最大时再从开始位置递减。扇区号小的先响应，扇区号一样的话可以任选一个进行响应。

SCAN调度算法也叫“电梯”算法，磁头固定从外向内然后从内向外沿柱面运动。如此往复，遇到所请求的柱面时立即为其服务。在本题中，题目告诉我们系统刚完成了10号柱面的操作，当前移动臂在13号柱面上，说明目前磁头正由小柱面号向大柱面号方向移动，那么根据SCAN调度的原则，接着应该响应柱面号为15的请求，而在题目中给出了三个柱面号为15的请求，但其中**①和⑦是磁头号8，而7的扇区号为1，因此应该先响应进程⑦，**而⑩是用磁头号为10，其扇区号为4，因此接着要响应进程⑩，然后再响应进程①，接着就要出来柱面号为20的进程**，分别为②和④，它们的扇区号相同，可以任选一个进行读取；**再接着应该响应柱面号为30的进程，当磁头在这个方向上移动时，也无进程需要出来，因此只有当磁头由大柱面号向小柱面号方向移动时，再来出来其它进程，处理的次序应该要根据柱面号从大到小，因此是⑨⑧⑤⑥。

　　而采用CSCAN（单向扫描）调度算法，它的磁头是单向移动的，**也就是当磁头从内向外移动到最外面时，磁头放到最内，然后再从内向外扫描**。因此采用这种方式得到的响应序列应该是⑦⑩①②④③⑥⑤⑧⑨。

## 嵌入式系统

![image-20211101150848542](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101150848542.png)

**嵌入式系统初始化过程可以分为3个主要环节，按照自底向上、从硬件到软件的次序依次为：片级初始化、板级初始化和系统级初始化。**         系统初始化以软件初始化为主，主要进行操作系统的初始化。

![image-20211101151521142](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20211101151521142.png)

嵌入式操作系统的特点：

 1.微型化，从性能和成本角度考虑，希望占用的资源和系统代码量少； 

2.可定制，从减少成本和缩短研发周期考虑，要求嵌入式操作系统能运行在不同的微处理器平台上，能针对硬件变化进行结构与功能上的配置，以满足不同应用的需求；

 3.实时性，嵌入式操作系统主要应用于过程控制、数据采集、传输通信、多媒体信息及关键要害领域需要迅速响应的场合，所以对实时性要求较高； 

4.可靠性，系统构件、模块和体系结构必须达到应有的可靠性，对关键要害应用还要提供容错和防故障措施；

 5.易移植性，为了提高系统的易移植性，通常采用硬件抽象层和板级支撑包的底层设计技术。             

## 进程管理及前驱图

[(76条消息) 【进程管理】进程 P1、P2 、P3、P4 和 P5 的前趋图如下所示:_あなたを待って-CSDN博客](https://blog.csdn.net/wyf2017/article/details/89425039)

![image-20211101154138868](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101154138868.png)



**解析**

![image-20211101160639299](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101160639299.png)

# 进程管理

## 基础

1. 互斥信号量的初值为1
2. 如果系统采用信箱通信方式，那么当进程调用Send原语被设置成“等信箱”状态时，意味着指定的信箱存满了信件，无可用空间。
3. 在同一进程中的各个线程都可以共享该进程所拥有的资源，如访问进程地址空间中的每一个虚地址；访问进程拥有**已打开文件、定时器、信号量机构**等，但是不能**共享进程中某线程的栈指针**。             

## PV操作

PV操作可以实现资源的互斥使用。

![image-20211101161759220](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101161759220.png)

本题主要考查PV操作实现同步与互斥。在本题中，题目告诉我们甲乙俩人互斥使用半成品箱这个共有资源，且只有一个半成品箱,那么互斥信号星的初值就应该为1。而从题目给出的同步模型图，我们可以看出，信号量**S1是生产者甲的私有信号星**，而**S2是生产者乙的私有信号量**，题目告诉我们半成品箱可存放n件半成品，那么初始状态时，S1的值应该为n，表示生产者甲最多只能生产n个半成品放入半成品箱，就需要生产者乙来协调工作。而S2的值为O，表示开始时半成品箱中没有半成品。

## 进程资源分配

![image-20211101163521062](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101163521062.png)

![image-20211101163531255](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101163531255.png)

1. P1申请两个，P2申请一个，则此时p1还需要2个，p2需要4个。p3，p4没有申请。还需6,7个。  申请后，已用资金=4+4+2+3=13个，可用资金还剩余2个，能够保证p1完成，p1完成释放资源后，能保证之后的p2...等完成，因此资金周转状态是安全的。
2. 15-3-2-3=7个
3. 5,4,6    尚需资金3 4 4  因为此时已用资金为5+4+6=15，剩余0可用资金。不能保证p2的完成，因此是不安全的。

![image-20211101164805595](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101164805595.png)

假设系统为每个进程分配了2个资源，对于选项C，系统还剩余1个资源，能保证5个进程中的一个进程运行完毕。当该进程释放其占有的资源，系统可用资源数为3个，能保证未完成的4个进程中的3个进程运行完毕。当这3个进程释放其占有的资源，系统可用资源数为9个，显见能确保最后一个进程运行完。

![image-20211101165037466](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101165037466.png)

系统采用PV操作实现进程的同步与互斥，当执行一次P操作表示申请一个资源，信号量S减1，如果S<0，其绝对值表示等待该资源的进程数。本题信号量S的值为-3，表示系统中有3个等扫描仪的进程。             

​       

![image-20211101171423178](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101171423178.png)

S1和S5是互斥信号量，初值都为1

s2=n，s4=m

信号量S2表示半成品箱B1的容量，故S2的初值为n。当工人P1不断地将其工序上加工的半成品放入半成品箱B1时，应该先测试半成品箱是否有空位，故工人P1使用P（S2），当工人P2从半成品箱取一件半成品时，半成品箱B1就空出一个空位，故工人P2使用V（S2）释放空间。 同理，信号量S4表示成品箱B2的容量，故S4的初值为m。当工人P2完成一件产品放入成品箱B2时，应该先测试成品箱是否有空位，故工人P2使用P（S4），当检验员P3从成品箱取一件产品检验时，成品箱B2就空出一个空位，故检验员P3使用V（S4）释放空间。         

![image-20211101172307914](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101172307914.png)  

首先，这里采用的是先来先服务调度算法，即按照申请的顺序来安排运行，申请顺序已在题干假设为P1-P2-P3-P4。 其次，单个空无法判断结构，那么结合第二空的选项来分析。首先**不能两个进程同时运行，**因此“释放了扫描仪”选项排除。 再根据原本P1-P2-P3-P4的状态分别是（运行、就绪、等待、等待），**因此接下来能够在运行态的，要么是保持运行未改变的P1，否则应该是已经进入就绪态的P2（**依据先来先服务的调度原则），第二空4个选项中，符合的只有“释放了打印机”选项，此时P1-P2-P3-P4的状态分别是（就绪、运行、等待、等待）。 据此再来分析第一空，P1由运行态转变为就绪态，条件应该是时间片到，所以选择“时间片到”。               .

## 响应时间

![image-20211101164921579](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101164921579.png)

在分时系统中是将把CPU的时间分成很短的时间片轮流地分配给各个终端用户，当系统中的用户数为n、时间片为q时，那么系统对每个用户的响应时间等于n*q。  

## 地址转换

**逻辑地址与物理地址之间的转换**

逻辑地址与物理地址

1. 逻辑地址由页号和业内地址组成。
2. 物理地址页物理块号（页帧号）和物理地址组成。
3. 逻辑地址的页内地址和内存物理地址相同
4. 页号和物理块号不一定相等。

![image-20211101175706278](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101175706278.png)   

## 进程资源图

教程：[(57条消息) 【进程管理】在如下所示的进程资源图中，（27）；该进程资源图是（28）。_あなたを待って-CSDN博客_进程资源图](https://blog.csdn.net/wyf2017/article/details/89430782)

![image-20211101195008441](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101195008441.png)

![image-20211101182040731](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101182040731.png)

**判断阻塞节点与非阻塞节点**

阻塞节点：进程申请资源得不到满足

非阻塞节点：系统有足够的空闲资源分配给该进程

R1：主动分配资源给P1,P3。剩余资源0   因此P2申请资源得不到，满足，因此P2为阻塞节点

R2：同理，P1申请资源得不到满足，P1为阻塞节点

R3：分配资源给P2 还有一个资源供p3使用，为非阻塞节点。

**判断进程资源图是否可化简**

第一步：先看系统还剩下多少资源没分配，再看有哪些进程是不阻塞（“不阻塞”即：系统有足够的空闲资源分配给它）的
第二步：把不阻塞的进程的所有边都去掉，形成一个孤立的点，再把系统分配给这个进程的资源回收回来
第三步：看剩下的进程有哪些是不阻塞的，然后又把它们逐个变成孤立的点。
第四步：最后，所有的资源和进程都变成孤立的点。这样的图就叫做“可完全简化”

当P3向R3申请一个资源的时候因为R3有一个资源可以分配所以为非阻塞节点，对于P2和P1因为R1和R2无资源可分配所以发出的申请资源请求得不到满足故为阻塞节点

![image-20211101194923660](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101194923660.png)

如图我将P3去掉然后我们主要分析P1、P2以及R1R2R3的资源数，通过分析我们可以知道P1P2对R1和R2发出资源申请都可以得到满足所以为非阻塞节点故可以化简

顺序为P3——P1——P2

# 文件管理

## 文件存储

![image-20211101203859828](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101203859828.png)

根据题意，磁盘块的大小为1KB，每个块号需占3B，因此一个磁盘物理块可存放1024/3=341个块号（取整）。 采用一级索引时的文件最大长度为： 341X1024/1024=341KB 采用二级索引时的文件最大长度为： 341X341X1024/1024=116281KB             

一个物理块里面能放341个块号，一个块号又能放一个物理块地址，大小为磁盘块大小1k。所以使用341*1024表示一共能存多大字节的文件。

![image-20211101204134713](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101204134713.png)

​	影响文件系统可靠性因素之一是文件系统的一致性问题。很多文件系统是先读取磁盘块到主存，在主存进行修改，修改完毕再写回磁盘。例如读取某磁盘块，修改后再将信息写回磁盘前系统崩溃，则文件系统就可能会出现不一致性状态。**如果这些未被写回的磁盘块是索引节点块、目录块或空闲块，特别是系统目录文件，那么对系统的影响相对较大，且后果也是不堪设想的。**通常解决方案是采用文件系统的一致性检查，一致性检查包括块的一致性检查和文件的一致性检查。   

![image-20211101211249231](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101211249231.png)          

![image-20211101211300705](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101211300705.png)



![image-20211101212050262](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101212050262.png)

直接存储  0-5

一级存储 1kb/4b = 256      256*2 = 512

二级存储   256*256=65536 

一共   66048+512+5 = 66053

## 位图存储

![image-20211101201709655](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101201709655.png)

字长32位，可以记录32个物理块的使用情况。这样0-31号物理块为第一个字的描述，那么4096可以描述128个物理块（0--4095）。4096表示第128个数字的描述。

根据题意，若磁盘的容量为200GB，物理块的大小为1MB，那么该磁盘就有204800个物理块（即200X1024），位示图的大小为204800/32=6400个字。          

![image-20211101210341690](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101210341690.png)   

![image-20211101210350488](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101210350488.png)

## 目录

![image-20211101202710709](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101202710709.png)

当用户双击一个文件名时，Windows系统通过建立的文件关联来决定使用什么程序打开该文件。             

![image-20211101202746237](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101202746237.png)

**文件的全文件名应包括盘符及从根目录开始的路径名**，所以从题图可以看出文件fl.java 的全文件名为D:\Program\Java-prog\fl.java。 文件的相对路径是当前工作目录下的路径名，所以从题图可以看出文件fl.java的相对路径名为Java-prog\。             

注意：相对路径当前路径开始没有\

# 存储管理

## 基础

1. 在磁盘调度管理中，通常先进行移臂调度，再进行旋转调度。

## 硬盘容量

![image-20211101213303600](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101213303600.png)

硬盘容量分为非格式化容量和格式化容量两种，计算公式如下：

非格式化容量=面数×（磁道数/面）×内圆周长×最大位密度

格式化容量=面数×（磁道数/面）×（扇区数/道）×（字节数/扇区）

题目中给出硬盘的面数为8，每面的磁道数为（30-10）×10÷2×16，每磁道扇区数为16，每扇区512字节，因此其格式化容量为换算成MB单位时再除以1024*1024。

## IO接口编址

![image-20211101214130981](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101214130981.png)

常用的I/O接口编址方法有两种：

内存单元统一编址：IO的有关寄存器与主存中的存储单元统一在一个公共的地址空间，对IO接口的访问就如同对主存单元的访问。

单独编址：指通过设置单独的I/O地址空间，为接口中的有关寄存器或存储部件分配地址码，需要设置专门的I/o指令进行访问。**优点是不占用主存的地址空间，访问主存的指令和访问接口的指令不同，在程序中容易使用和辨认。**             

## 段页式存储

![image-20211101215607717](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211101215607717.png)

从题目给出的段号、页号、页内地址位数情况，可以推算出每一级寻址的寻址空间。如：已知页内地址是从第 0 位到第 11 位，共 12 个位，所以一个页的大小为：2^12=4K。页号是从第 12 位到第 23 位，共 12 个位，所以一个段中有 2^12=4096 个页。段号是从第 24 位到第 31 位，共 8 个位，所以一共有 2^8=256 个段。             

注意：最大允许。

## 页式存储

## 页面淘汰

![image-20211102092743590](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102092743590.png)

从图a我们可以看出，MOVE执行属于页面0和1，而Data1属于页面2和3，Data2属于页面4和5，另外，结合图b可以看出，编号为1、2、3、4、5的页面都不在内存中，如果要取这几个页面的数据，必须先将其置换进内存，因此总共是5次缺页中断，其中取指令产生1次缺页中断，取Data1和Data2操作数分别产生2次缺页中断。

指令只产生一次缺页中断。



没有使用块表表明：

每读一次内存的块，我需要先读内存中的表，再读内存中的块。执行两次内存的读取操作。一共六个页面，那么我需要读12次内存。

![image-20211002111227542](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211002111227542.png)

产生5次中断。

![image-20211102093122649](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102093122649.png)

根据题意，页面变换表中状态位等于0和1分别表示页面不在内存或在内存，所以0、2和4号页面在内存。**当访问的页面3不在内存时，系统应该首先淘汰未被访问的页面，因为根据程序的局部性原理，最近未被访问的页面下次被访问的概率更小；如果页面最近都被访问过，应该先淘汰未修改过的页面。**因为未修改过的页面内存与辅存一致，故淘汰时无需写回辅存，使系统页面置换代价小。经上述分析，0、2和4号页面都是最近被访问过的，但2和4号页面都被修改过而0号页面未修改过，故应该淘汰0号页面。             

根据题意，页面大小为4KB，逻辑地址为十六进制2C25H 其页号为2，页内地址为C25H，查页表后可知页帧号（物理块号）为4，该地址经过变换后，其物理地址应为页帧号4拼上页内地址C25H，即十六进制4C25H。             

## 内存管理

![image-20211102093851381](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102093851381.png)

当 P5 运行完后释放空间时，发现其释放的空间上下方都有空闲区，故将两个空闲区与自身要释放的空闲区合并，从而形成一个新的空闲区，导致系统的空闲区数量上减1。而造成这种现象的主要原因就是要释放空闲区相邻的上下方空闲区。          

# 设备管理

   ![image-20211102094155081](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102094155081.png)

程序查询和中断需要CPU进行数据交换，DMA不需要CPU进行数据交换

**程序查询和中断方式都需要CPU来执行程序指令进行数据的输入和输出，DMA方式则不同，这是一种不经过CPU而直接从内存存取数据的数据交换模式。** 程序查询方式是由CPU主动查询外设的状态，在外设准备好时传输数据。 中断方式是在外设准备好时给CPU发中断信号，之后再进行数据传输。在外设未发中断信号之前，CPU可以执行其他任务。 在DMA模式下，CPU只需向DMA控制器下达指令，让DMA控制器来处理数据的传送，数据传送完毕再把信息反馈给CPU即可。             

## 移臂算法

![image-20211102094450456](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102094450456.png)

因为先来先服务是谁先请求先满足谁的请求。

而最短寻找时间优先是根据当前磁臂到要请求访问磁道的距离，谁短满足谁的请求，故先来先服务和最短寻找时间优先算法可能会随时改变移动臂的运动方向。           

## 磁盘块与缓冲区  

![image-20211102094902737](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102094902737.png)

![image-20211102094928241](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102094928241.png)

单缓冲区（10+5）*10+2=152

双缓冲区（10）*10+5+2=107

假设磁盘块与缓冲区大小相同，每个盘块读入缓冲区的时间为16us, 由缓冲区送至用户区的时间是5us,在用户区内系统对每块数据的处理时间为1us.若用户需要将大小为10个磁盘块的Doc1文件逐块从磁盘读入缓冲区，并送至用户区进行处理，那么采用单缓冲区需要花费的时间为（49）us: 采用双缓冲区需要花费的时间为，（50）us.
（49）A.160   B.161   C.166   D.211
（50）A.160   B.161   C.166   D.211
【答案】D C
**当采用单缓冲区时，由于将盘块读入缓冲区与将数据从缓冲区转到用户区，都要用到同一个缓冲区，**所以只能把这两步作为流水线的一个段。所以计算方式为：
16+5+1+（10-1）*（16+5）=211us。
**当采用双缓冲区时，读入缓冲区与将数据从缓冲区转到用户区可以作为流水线的两个段，**所以计算方式为：
16+5+1+（10-1）*16=166us。



![image-20211102104855609](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102104855609.png)

**问一个数据块的时间应为寻道时间加旋转延迟时间及传输时间之和**。根据题意，每块的旋转延迟时间及传输时间共需120ms，**磁头从一个磁道移至另一个磁道需要6ms，但逻辑上相邻数据块的平均距离为10个磁道，即读完一个数据块到下一个数据块寻道时间需要60ms。**通过上述分析，本题**访问一个数据块的时间T=120ms+60ms=180ms，**而读取一个100块的文件共需要18000ms。             



题目：

![image.png](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/1632275987662-f48bd354-935d-418b-82aa-b38c51556b7e.png)

第一问:

![image.png](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/1632277720220-d1b0b36c-2a0e-4fa8-a76e-dce3744d7559.png)

读取数据的时间为3ms，因为是单缓存区，所以缓存区只能存一个物理块的记录。将读出来的数据放入缓存区，处理数据的时间为3ms。相当于一条记录从读取到处理使用6ms。

当R0读取完时，此时磁头在R1的开始位置。因为暂存区中有数据R0，所以此时R1的数据进不了缓存。只能等3ms后，R0的数据处理完才能进，但是磁盘是转动的。等R1数据处理完时，此时磁头已经走到了R2的开始位置。

所以当需要处理R1的数据时，磁盘必须再走一个周期到R1，才能实现R0走过之后，就走R1。之后数据的处理都和R0一样。

因此，处理一条记录需要33+3  这样才能正好读下一条数据。

因为R10之后，不需要处理周期，因此需要处理周期的只有R0--R9。因此R0-R9需要  （33+3）*10=360  再加上处理R10所需要的时间6，所以一共需要366ms。

第二问：

最佳的方式，就是处理完R0直接处理R1

![image.png](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/1632277741861-bbd0fa13-ee4d-41d1-921e-46ae2c48605a.png)



一条记录6ms，一共需要66ms

## IO设备

![image-20211102112147683](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102112147683.png)

具体层次从上往下分别为**用户级I/O层、设备无关I/O层、设备驱动程序、中断处理程序、硬件。** 

硬件：完成具体的I/O操作。 中断处理程序：I/O完成后唤醒设备驱动程序。 设备驱动程序：设置寄存器，检查设备状态。 设备无关I/O层：设备名解析、阻塞进程、分配缓冲区。 用户级I/O层：发出I/O调用。             

## 作业管理

![image-20211102113326158](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20211102113326158.png)

I1,I2,I3,I4

C1,C2,C3,C4

P1,P2,P3,P4

按顺序即可。

