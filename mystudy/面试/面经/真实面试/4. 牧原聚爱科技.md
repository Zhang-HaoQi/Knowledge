# 一面

## 技术

1. **接口和抽象类区别**

   1. 抽象类面向模板设计，接口面向规范
   2. 抽象类可以定义任何类型的变量，接口只能定义静态常量
   3. 抽象类可以定义任何类型的方法，接口只能定义抽象方法
   4. 抽象类可以定义代码块，接口不能定义
   5. 一个类只能实现一个抽象类，一个类可以实现多个接口

2. **基本数据类型和包装数据类型区别**

3. **int a = 22   Integer b = new Integer(22)    a==b?**

   **int a =1000   Integer b = new Integer(1000)   a==b?**

   Integer类型的数据与int类型数据比较时，会自动拆箱为int类型，因此二者都相等。

   如果是包装类型的比较

   Integer a = 22  , Integer b = 22  a=b

   Integer a = 1000  , Integer b = 1000  a!=b

   原因：在-128——127之间，Java会进行自动装箱，然后会对值进行缓存，如果有相同 的值，会直接在缓存中取出使用。当超过这个范围，会在堆中new出来一个对象存储。

4. 开发过程中对map的理解

   map是一个字典数据类型，实现类有HashMap，TreeMap，Hashtable，set等。

5. 多线程环境下，对map进行操作，会发生什么问题

   1. 1.7的情况下，hash冲突时可能产生循环链表
   2. 多线程put，key相同时，原则上后put的覆盖之前的，但可能线程抢占资源的时机不同，导致先put的覆盖后put的
   3. put和get同时操作，原则上先put，再get，多线程可能发生先get在put的情况

6. 多线程操作map产生的并发问题，你会怎么解决

   使用CurrentHashMap

7. 实际开发中有没有用到map或set

   有。。。。。

8. stream流都用的哪些

   filter，map，foreach，集合的相互转换，筛选数据等

9. 多线程如何保证资源安全问题

   1. 尽量使用线程安全的集合或map
   2. 使用juc下的automicInteger等类
   3. 加锁，如synchronized，lock等

10. 使用lock锁的时候，加锁是写在业务方法内，还是业务方法外

    1. 一般情况下，加锁放在方法外

11. redis分布式锁

12. 锁设置了10s，如果业务超过了10s你会怎么处理

13. 执行业务方法的时候，如何避免业务一直占用着锁

    1. 检查自己代码逻辑，是否产生死循环
    2. 读数据库是否超时
    3. 请求网络资源，网络不稳定，可能造成超时，设置超时时间

14. Spring ioc

15. 使用IOC进行管理，产生循环依赖问题如何解决

    [spring：我是如何解决循环依赖的？ - 腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1769948)

    1. 产生循环依赖，说明设计上有问题，从设计上就应该避免，如果出现service调用service的循环依赖，可以通过调用Mapper层解决。
    2. 使用setter注入，使用三级缓存解决
    3. 使用构造器注入，并使用@Lazy注解解决。

16. 三级缓存，能解决构造依赖注入吗

    不能

    使用setter注入：Spring的三级缓存默认处理，不会出现循环依赖异常。

    ```java
    @Service
    public class AServiceImpl implements  IAService {
       @Autowired
       private  IBService ibService;
    }
    
    @Service
    public class BServiceImpl implements IBService {
    	@Autowired
        private   IAService iaService;
    }
    ```

    使用构造器注入：Spring的三级缓存处理不了，会出现循环依赖异常。

    ```java
    @Service
    @RequiredArgsConstructor
    public class BServiceImpl implements IBService {
        private  final IAService iaService;
    }
    @Service
    @RequiredArgsConstructor
    public class AServiceImpl implements  IAService {
       private final IBService ibService;
    }
    ```

    ![image-20221213211116809](https://mynotepicbed.oss-cn-beijing.aliyuncs.com/img/image-20221213211116809.png)

    解决方式：

    1. 改为@Autowired注解去注入bean，因为@Autowired注解本身就已经解决了循环依赖的问题
    2. 在类上添加此注解@RequiredArgsConstructor(onConstructor_ = {@Lazy})

17. AOP使用的场景

    1. 权限
    2. 缓存
    3. 日志
    4. 事务
    5. 异常处理等

18. 发送的错误，哪些错误需要发邮件，哪些不需要发邮件

19. Spring cloud有哪些组件，都有什么作用

20. 说一下你对注册中心的理解

    1. 没有注册中心，集群环境下无法负载均衡
    2. 链接写死，集群环境下不容易维护

21. gateway的理解

    1. 身份认证和权限校验
    2. 服务路由，复杂均衡
    3. 请求限流

22. 网上常见的攻击，你要拦截，你会在哪里进行拦截

    [(166条消息) Spring Cloud Gateway统一拦截服务请求，避免绕过网关请求服务_小小_飞侠的博客-CSDN博客_spring cloud gateway统一拦截服务请求](https://blog.csdn.net/m0_37798046/article/details/117252573#:~:text=在 SpringCloud 微 服务 框架下，可以通过,网关gateway 来进行 统一 的接口 请求拦截 ，这里我主要用来做接口数据的加解密传输，这里使用了RSA非对称加密算法。)

23. git开发中常用的操作

24. 功能的上线

25. git分支有使用吗

26. dev有冲突，你会怎么去合并

27. maven  jar冲突，class文件找不到你会怎么解决 

    [Maven Jar包冲突？看看高手是怎么解决的 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/417419703)

28. id，name，age，地址  你会如何定义类型以及长度

29. 你在开发过程中会使用那些索引，你在开发中使用哪些

30. 线上的时候，给慢sql给你，你会怎么分析

    [慢SQL优化一点小思路 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/453156315#:~:text=通过explain命令，我们能分析出一些慢SQL的常见原因： 索引使用问题，通过 possible_keys (能用到的索引) 和,key (实际用到的索引) 两个字段查看： 没有使用索引 优化器选择了错误索引 没有实现覆盖索引)

31. A表有身份证号，B表有身份证号，or链表的时候，并没有走索引

    表是不同人创建的，身份证号的字符集编码，排序规则或者类型不一样

32. 索引失效的场景

反问：

1. 公司此岗位具体做什么的
2. 公司常用技术栈是什么
3. 年前还是年后入职

期望薪资是多少：

# 二面

